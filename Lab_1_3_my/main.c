#include <stdio.h>   // Підключення бібліотеки для введення/виведення: printf(), scanf(), getchar()
#include <stdlib.h>  // Підключення стандартної бібліотеки, містить exit(), malloc(), free() і т.д.
#include <math.h>    // Бібліотека для математичних функцій: pow(), sqrt(), sin(), cos(), тощо

// Функція обчислення значення функції f(x)
double f_test(double x) {
    // pow(x, 3) — підносить x до куба (x^3)
    // pow(x, 2) — підносить x до квадрату (x^2)
    // Формула згідно з варіантом: (x^3 / 30) - (4 * x^2) + 50
    return (pow(x, 3) / 30.0) - (4 * pow(x, 2)) + 50; //pow(x,..n) - підносить до степення та повертає її до double
}

// Головна функція програми
int main() {
    // Змінні для збереження меж інтервалу і параметрів
    double X1, X2, delta;     // X1 — початок, X2 — кінець інтервалу, delta — крок
    unsigned int N;           // Кількість точок N (невід’ємних цілих чисел)
    int mode;                 // Режим вводу: 1 (X1, X2, N) або 2 (X1, X2, delta)

    // Меню вибору режиму
    printf("Choose input mode:\n");
    printf("1 - X1, X2, N\n");         // Повідомлення про режим 1
    printf("2 - X1, X2, delta\n");     // Повідомлення про режим 2
    printf("Your choice: ");
    scanf("%d", &mode);                // Зчитування вибору користувача (вводиться 1 або 2)

    // Якщо вибрано режим 1 — вводимо X1, X2, N
    if (mode == 1) {
        printf("Enter X1: ");
        scanf("%lf", &X1);             // Зчитування X1 (початок інтервалу)

        printf("Enter X2: ");
        scanf("%lf", &X2);             // Зчитування X2 (кінець інтервалу)

        printf("Enter number of points N: ");
        scanf("%u", &N);               // Зчитування кількості точок (N)

        if (N > 1) {
            // Обчислення кроку: довжина інтервалу / (N - 1)
            delta = (X2 - X1) / (N - 1);
        } else {
            // Якщо N <= 1 — помилка
            printf("Error: N must be > 1\n");
            return 1;                  // Завершення програми з кодом помилки
        }
    }

    // Якщо вибрано режим 2 — вводимо X1, X2, delta
    else if (mode == 2) {
        printf("Enter X1: ");
        scanf("%lf", &X1);             // Зчитування X1

        printf("Enter X2: ");
        scanf("%lf", &X2);             // Зчитування X2

        printf("Enter step delta: ");
        scanf("%lf", &delta);          // Зчитування кроку (delta)

        if (delta > 0) {
            // Обчислення кількості точок: скільки разів delta вкладається в інтервал
            N = (unsigned int)((X2 - X1) / delta) + 1;
        } else {
            // Якщо крок <= 0 — помилка
            printf("Error: delta must be > 0\n");
            return 1;                  // Завершення програми з кодом помилки
        }
    }

    // Якщо режим не 1 і не 2 — помилка
    else {
        printf("Error: wrong mode.\n");
        return 1;                      // Завершення програми з помилкою
    }

    // Виведення введених даних (для перевірки)
    printf("X1=%.2lf,  X2=%.2lf,  delta=%.2lf\n\n", X1, X2, delta);

    // Виведення заголовку таблиці
    printf("--------------------------------------------\n");
    printf("*   N   *    X    *    F(X)   *\n");
    printf("--------------------------------------------\n");

    int rowsPerPage = 9; // Кількість рядків на сторінці перед паузою

    // Основний цикл: проходження по N точках
    for (unsigned int i = 0; i < N; i++) {
        double x = X1 + i * delta;       // Обчислення поточного x
        double y = f_test(x);  // Обчислення f(x)

        // Виведення значень у вигляді рядка таблиці
        printf("| %3u  | %6.2lf | %8.2lf |\n", i + 1, x, y);

        // Пауза кожні 9 рядків, якщо ще залишились точки
        if ((i + 1) % rowsPerPage == 0 && (i + 1) < N) {
            printf("--------------------------------------------\n");
            printf("Press Any Key to Continue ...\n");

            // getchar() використовується для затримки виводу (натискання клавіші)
            getchar(); // зчитує залишений '\n' після scanf
            getchar(); // очікує натискання будь-якої клавіші

            printf("--------------------------------------------\n"); // лінія після паузи
        }
    }

    // Завершальна лінія таблиці
    printf("--------------------------------------------\n");

    return 0; // Успішне завершення програми
}
